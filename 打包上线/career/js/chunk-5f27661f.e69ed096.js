(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f27661f"],{"4c1c":function(t,e,i){},a821:function(t,e,i){"use strict";var s=i("4c1c"),n=i.n(s);n.a},c7ef:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"growthFile"},[i("div",{staticClass:"myReports"},[t._m(0),i("ul",{staticClass:"electiveBox"},[i("li",[t._m(1),i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("\n                        成长档案\n                    ")]),i("div",{staticClass:"buttons"},[i("div",{staticClass:"button",style:{margin:t.isReport?"":"40px 20px"},on:{click:t.createReport}},[t._v("\n                            生成\n                        ")]),t.isReport?i("div",{staticClass:"button",on:{click:function(e){return t.goReport(t.reportId)}}},[t._v("\n                            查看\n                        ")]):t._e()])])])]),t._m(2),i("table",[t._m(3),i("tbody",t._l(t.reportList,function(e,s){return i("tr",{key:s},[i("td",[t._v("成长档案")]),i("td",[t._v(t._s(e.createdAt))]),i("td",[i("span",{on:{click:function(i){return t.goReport(e.id)}}},[t._v("查看")])])])}),0)]),0==t.reportList.length?i("div",{staticClass:"noneContent"}):t._e(),i("div",{staticClass:"page_box"},[i("span",[t._v("共"+t._s(t.count)+"条")]),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.count},on:{"current-change":t.currentChange}})],1)]),i("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[i("span",[t._v("您当前的学业规划次数较少，此时生成《成长档案》内容可能会有缺失，是否还要继续生成？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.goCreateReport}},[t._v("生 成")])],1)])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("img",{attrs:{src:"imgs/careerArchives/icon_biaoti.png",alt:""}}),t._v("\n            成长档案\n        ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("img",{attrs:{src:"/imgs/careerManagement/academicPlanningReport/icon_head.png",alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("img",{attrs:{src:"imgs/careerArchives/icon_biaoti.png",alt:""}}),t._v("\n            历史记录\n        ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("td",[t._v("名称")]),i("td",[t._v("日期")]),i("td",[t._v("查看")])])])}],a={name:"index",data:function(){return{reportList:[],count:0,totalPage:"",pageSize:7,currentPage:1,isReport:!1,reportId:0,isFinishTest:!1,numList:[],centerDialogVisible:!1}},methods:{successMessage:function(t){this.$message({type:"success",message:"detail"})},unSuccess:function(t){this.$message({type:"error",message:t})},jump:function(t){this.$router.push(t)},goReport:function(t){var e=this.$router.resolve({path:"/growthFile/growthFileReport",name:"成长档案",query:{id:t}}),i=e.href;window.open(i,"_blank")},currentChange:function(t){this.currentPage=t,this.history(t)},isNo:function(){var t=this;this.$ajax.post(this.G_uri+"/careerGrowthReport/getLastReport",{},{headers:{token:window.sessionStorage.getItem("ymtxToken")}}).then(function(e){if(2e3==e.data.code){var i=e.data.data;0!=i.id&&(t.isReport=!0),t.reportId=i.id}}).catch(function(t){console.log(error)})},createReport:function(){var t=this.isFinishTest,e=this.numList.length;console.log(t,e),t?e<10?this.centerDialogVisible=!0:this.goCreateReport():this.unSuccess("请先完成生涯测评！")},goCreateReport:function(){var t=this;this.centerDialogVisible=!1,this.$ajax.post(this.G_uri+"/careerGrowthReport/storeReport",{},{headers:{token:window.sessionStorage.getItem("ymtxToken")}}).then(function(e){2e3==e.data.code&&(t.isNo(),t.history())}).catch(function(t){console.log(t)})},history:function(t){var e=this,i=t,s=this.pageSize;this.$ajax.post(this.G_uri+"/careerGrowthReport/getReportList",{pageNumber:i,pageSize:s},{headers:{token:window.sessionStorage.getItem("ymtxToken")}}).then(function(t){if(2e3==t.data.code){var i=t.data.data;0!=i.list.length&&(e.reportList=i.list),e.totalPage=i.page.totalPage,e.count=i.page.count}}).catch(function(t){console.log(t)})},goTest:function(){var t=window.sessionStorage.getItem("ymtxToken"),e=this;this.$ajax.post(this.G_uri+"/chooseSubject/startTest",{testType:1},{headers:{token:t}}).then(function(t){2e3==t.data.code&&(3==t.data.data.code?e.isFinishTest=!0:e.isFinishTest=!1)}).catch(function(t){console.log(t)})},getAcademicPlanList:function(){var t=this;this.$ajax.post(this.G_uri+"/academicPlanCategory/getAcademicPlanList",{},{headers:{token:window.sessionStorage.getItem("ymtxToken")}}).then(function(e){if(2e3==e.data.code){var i=e.data.data;t.numList=i}})}},created:function(){this.goTest(),this.getAcademicPlanList(),this.isNo(),this.history()}},o=a,r=(i("a821"),i("2877")),c=Object(r["a"])(o,s,n,!1,null,"72755864",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-5f27661f.e69ed096.js.map